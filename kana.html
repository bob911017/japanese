<!DOCTYPE html>
<html>
<head>
	<title>五十音</title>
	<link rel="icon" href="oruyanke.png" type="image/x-icon">
	<link rel='stylesheet' href='style.css'>
</head>


<script>
var answer=['a','i','u','e','o','ka','ki','ku','ke','ko','sa','si','su','se','so','ta','ti','tu','te','to','na','ni','nu','ne','no','ha','hi','hu','he','ho','ma','mi','mu','me','mo','ya','yu','yo','ra','ri','ru','re','ro','wa','wo','n'];
var hiragana=['あ','い','う','え','お','か','き','く','け','こ','さ','し','す','せ','そ','た','ち','つ','て','と','な','に','ぬ','ね','の','は','ひ','ふ','へ','ほ','ま','み','む','め','も','や','ゆ','よ','ら','り','る','れ','ろ','わ','を','ん'];
var katakana=['ア','イ','ウ','エ','オ','カ','キ','ク','ケ','コ','サ','シ','ス','セ','ソ','タ','チ','ツ','テ','ト','ナ','ニ','ヌ','ネ','ノ','ハ','ヒ','フ','ヘ','ホ','マ','ミ','ム','メ','モ','ヤ','ユ','ヨ','ラ','リ','ル','レ','ロ','ワ','ヲ','ン'];
var question;
var total;
var correctCount;
var table=0;

function tableChange(n){
	var id=[0,1,2,3];
	var i;
	for (i = 0; i < id.length; i++) {
		if (id[i]==n){
			document.getElementById('t'+id[i]).style.display='block';
			document.getElementById('b'+id[i]).style.color='yellow';
		}else{
			document.getElementById('t'+id[i]).style.display='none';
			document.getElementById('b'+id[i]).style.color='white';
		}
	}
}

function testChange(){
	if (document.getElementById('Qtype').value=='平假名 (ひらがな)'){
		document.getElementById('Qtype').value='片假名 (カタカナ)';
		document.getElementById('Qtype').style.background='#FFCBB3';
		question=katakana;
	}else{
		document.getElementById('Qtype').value='平假名 (ひらがな)';
		document.getElementById('Qtype').style.background='#FFF0AC';
		question=hiragana;
	}	
	check();
}

function check(){
	if (document.getElementById('A').value!=''){
		var newRow=document.getElementById('testSheet').insertRow(1);
		newRow.insertCell(0).innerHTML=document.getElementById('Q').innerHTML;	
		var correctAns=answer[question.indexOf(document.getElementById('Q').innerHTML)];
		newRow.insertCell(1).innerHTML=correctAns;
		var myInput=document.getElementById('A').value.toLowerCase();
		newRow.insertCell(2).innerHTML=myInput;
		
		total=parseInt(document.getElementById('total').innerHTML)+1;
		document.getElementById('total').innerHTML=total;
		correctCount=parseInt(document.getElementById('correctCount').innerHTML);
		if (correctAns!=myInput){
			document.getElementById('testSheet').getElementsByTagName('td')[5].style.color='red';
		}else{
			correctCount=correctCount+1;
			document.getElementById('correctCount').innerHTML=correctCount;
		}
		if (correctCount=='0'){
			document.getElementById('ratio').innerHTML='0%';
		}else{
			document.getElementById('ratio').innerHTML=(100*correctCount/total).toFixed(2)+'%';
		}
	}

	var rand=Math.floor(46*Math.random());
	document.getElementById('Q').innerHTML=question[rand];
	document.getElementById('A').value='';
}

document.addEventListener('keydown',function(e){	
    //document.getElementById('test').innerHTML=e.keyCode.toString();
	if (e.key == 'Enter') {
		check();		
	};
	if (e.key == ' ') {
		testChange();
	};
});

</script>

<body onload='testChange()'>

<div class='index'>
	<input class='index' type=button value='五十音' style='border-bottom: 5px red solid;'>
	<input class='index' type=button value='日常會話' onclick="location.href='nichijiou.html'">
	<input class='index' type=button value='基礎文法' onclick="location.href='grammar.html'">
</div>

<div style='width:800px;padding-left: 125px;'>

<div style="height:55px;">
	<input id='b0' class='tableTile' type=button value='平假名 (ひらがな)' onclick='tableChange(0)' style='color:yellow'>
	<input id='b1' class='tableTile' type=button value='片假名 (カタカナ)' onclick='tableChange(1)'>
	<input id='b2' class='tableTile' type=button value='濁音、半濁' onclick='tableChange(2)'>
	<input id='b3' class='tableTile' type=button value='拗音' onclick='tableChange(3)'>
</div>

<div id='t0'><table>
	<tr style="background:black;color:white;">
	<td></td><td>a 段</td><td>i 段</td><td>u 段</td><td>e 段</td><td>o 段</td>
	<tr>
	<td class='lead'>a 行</td><td>あ</td><td>い</td><td>う</td><td>え</td><td>お</td>
	<tr>
	<td class='lead'>ka 行</td><td>か</td><td>き</td><td>く</td><td>け</td><td>こ</td>
	<tr>
	<td class='lead'>sa 行</td><td>さ</td><td>し</td><td>す</td><td>せ</td><td>そ</td>
	<tr>
	<td class='lead'>ta 行</td><td>た</td><td>ち</td><td>つ</td><td>て</td><td>と</td>
	<tr>
	<td class='lead'>na 行</td><td>な</td><td>に</td><td>ぬ</td><td>ね</td><td>の</td>
	<tr>
	<td class='lead'>ha 行</td><td>は</td><td>ひ</td><td>ふ</td><td>へ</td><td>ほ</td>
	<tr>
	<td class='lead'>ma 行</td><td>ま</td><td>み</td><td>む</td><td>め</td><td>も</td>
	<tr>
	<td class='lead'>ya 行</td><td>や</td><td></td><td>ゆ</td><td></td><td>よ</td>
	<tr>
	<td class='lead'>ra 行</td><td>ら</td><td>り</td><td>る</td><td>れ</td><td>ろ</td>
	<tr>
	<td class='lead'>wa 行</td><td>わ</td><td></td><td></td><td></td><td>を</td>
	<tr>
	<td class='lead'>n 行</td><td>ん</td>
</table></div>


<div id='t1' style='display:none;'><table>
	<tr style="background:black;color:white;">
	<td></td><td>a 段</td><td>i 段</td><td>u 段</td><td>e 段</td><td>o 段</td>
	<tr>
	<td class='lead'>a 行</td><td>ア</td><td>イ</td><td>ウ</td><td>エ</td><td>オ</td>
	<tr>
	<td class='lead'>ka 行</td><td>カ</td><td>キ</td><td>ク</td><td>ケ</td><td>コ</td>
	<tr>
	<td class='lead'>sa 行</td><td>サ</td><td>シ</td><td>ス</td><td>セ</td><td>ソ</td>
	<tr>
	<td class='lead'>ta 行</td><td>タ</td><td>チ</td><td>ツ</td><td>テ</td><td>ト</td>
	<tr>
	<td class='lead'>na 行</td><td>ナ</td><td>ニ</td><td>ヌ</td><td>ネ</td><td>ノ</td>
	<tr>
	<td class='lead'>ha 行</td><td>ハ</td><td>ヒ</td><td>フ</td><td>ヘ</td><td>ホ</td>
	<tr>
	<td class='lead'>ma 行</td><td>マ</td><td>ミ</td><td>ム</td><td>メ</td><td>モ</td>
	<tr>
	<td class='lead'>ya 行</td><td>ヤ</td><td></td><td>ユ</td><td></td><td>ヨ</td>
	<tr>
	<td class='lead'>ra 行</td><td>ラ</td><td>リ</td><td>ル</td><td>レ</td><td>ロ</td>
	<tr>
	<td class='lead'>wa 行</td><td>ワ</td><td></td><td></td><td></td><td>ヲ</td>
	<tr>
	<td class='lead'>n 行</td><td>ン</td>
</table></div>


<div id='t2' style='display:none;'><table>
	<tr style="background:black;color:white;">
	<td></td><td>a 段</td><td>i 段</td><td>u 段</td><td>e 段</td><td>o 段</td>
	<tr>
	<td class='lead'>ga 行</td><td>が</td><td>ぎ</td><td>ぐ</td><td>げ</td><td>ご</td>
	<tr>
	<td class='lead'>za 行</td><td>ざ</td><td>じ</td><td>ず</td><td>ぜ</td><td>ぞ</td>
	<tr>
	<td class='lead'>da 行</td><td>だ</td><td>ぢ</td><td>づ</td><td>で</td><td>ど</td>
	<tr>
	<td class='lead'>ba 行</td><td>ば</td><td>び</td><td>ぶ</td><td>べ</td><td>ぼ</td>
	<tr>
	<td class='lead'>pa 行</td><td>ぱ</td><td>ぴ</td><td>ぷ</td><td>ぺ</td><td>ぽ</td>
</table></div>


<div id='t3' style='display:none;'><table>
	<tr style="background:black;color:white;">
	<td></td><td>a 段</td><td>u 段</td><td>o 段</td>
	<tr>
	<td class='lead'>kya 行</td><td>きゃ</td><td>きゅ</td><td>きょ</td>
	<tr>
	<td class='lead'>gya 行</td><td>ぎゃ</td><td>ぎゅ</td><td>ぎょ</td>
	<tr>
	<td class='lead'>sha 行</td><td>しゃ</td><td>しゅ</td><td>しょ</td>
	<tr>
	<td class='lead'>ja 行</td><td>じゃ</td><td>じゅ</td><td>じょ</td>
	<tr>
	<td class='lead'>cha 行</td><td>ちゃ</td><td>ちゅ</td><td>ちょ</td>
	<tr>
	<td class='lead'>dya 行</td><td>ぢゃ</td><td>ぢゅ</td><td>ぢょ</td>
	<tr>
	<td class='lead'>nya 行</td><td>にゃ</td><td>にゅ</td><td>にょ</td>
	<tr>
	<td class='lead'>hya 行</td><td>ひゃ</td><td>ひゅ</td><td>ひょ</td>
	<tr>
	<td class='lead'>bya 行</td><td>びゃ</td><td>びゅ</td><td>びょ</td>
	<tr>
	<td class='lead'>pya 行</td><td>ぴゃ</td><td>ぴゅ</td><td>ぴょ</td>
	<tr>
	<td class='lead'>mya 行</td><td>みゃ</td><td>みゅ</td><td>みょ</td>
	<tr>
	<td class='lead'>rya 行</td><td>りゃ</td><td>りゅ</td><td>りょ</td>
</table></div>
<br><br>

<div style='float:left;'>
<input id='Qtype' class='change'type=button value='片假名 (カタカナ)' onclick='testChange()'>
<div id='Q' class='Q'></div>
<input id='A' type=text size=10 maxlength=2 style="min-height:25px;text-align: center;">
<input type=button value='OK！' onclick='check()' style="height:33px;">
</div>


<div style='margin-left:180px;width:470px;height:260px;overflow-y:scroll;'>
<div style='float:left;margin-bottom:2px;'>答題數 : </div>
<div id='correctCount' style='float:left;margin-left:10px;'>0</div>
<div style='float:left;'>/</div>
<div id='total' style='float:left;margin-right:40px;'>0</div>
<div style='float:left;'>正確率 : </div>
<div id='ratio' style='float:left;margin-left:10px;'>0%</div>
<table id='testSheet' style="font-size:20px;width:400px;">
	<tr  style="background:black;color:white;">
	<td>題目</td><td>正解</td><td>輸入</td>
</table>
</div>


</div>
</body>

</html>